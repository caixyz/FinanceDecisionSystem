# é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

## ğŸ“ æ ¹ç›®å½•ç»“æ„ï¼ˆæ•´ç†åï¼‰

```
FinanceDecisionSystem/
â”œâ”€â”€ app.py                      # ä¸»åº”ç”¨ç¨‹åºå…¥å£
â”œâ”€â”€ public_stock_view.py        # å…¬å¼€è‚¡ç¥¨æŸ¥çœ‹æœåŠ¡
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–åˆ—è¡¨
â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ PROJECT_STRUCTURE.md       # é¡¹ç›®ç»“æ„æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ DATABASE_SCHEMA.md         # æ•°æ®åº“æ¶æ„æ–‡æ¡£
â”œâ”€â”€ FINAL_REPORT.md            # æœ€ç»ˆæŠ¥å‘Šæ–‡æ¡£

â”œâ”€â”€ core/                      # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ database.py           # æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ cache.py              # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ user.py               # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ stock_data.py         # è‚¡ç¥¨æ•°æ®æº
â”‚   â”œâ”€â”€ technical_analysis.py # æŠ€æœ¯åˆ†æ
â”‚   â””â”€â”€ backtest.py           # å›æµ‹å¼•æ“

â”œâ”€â”€ api/                       # APIæ¥å£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ routes.py             # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ handlers/             # è¯·æ±‚å¤„ç†å™¨
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ auth.py           # è®¤è¯å¤„ç†
â”‚       â”œâ”€â”€ stocks.py         # è‚¡ç¥¨API
â”‚       â””â”€â”€ backtest.py       # å›æµ‹API

â”œâ”€â”€ templates/                 # ç½‘é¡µæ¨¡æ¿
â”‚   â”œâ”€â”€ base.html             # åŸºç¡€æ¨¡æ¿
â”‚   â”œâ”€â”€ index.html            # ä¸»é¡µ
â”‚   â”œâ”€â”€ login.html            # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ register.html         # æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ stock_management.html # è‚¡ç¥¨ç®¡ç†
â”‚   â”œâ”€â”€ public_stocks.html    # å…¬å¼€è‚¡ç¥¨æŸ¥çœ‹
â”‚   â””â”€â”€ backtest.html         # å›æµ‹é¡µé¢

â”œâ”€â”€ static/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css
â”‚   â”‚   â””â”€â”€ responsive.css
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ main.js
â”‚   â”‚   â”œâ”€â”€ stock.js
â”‚   â”‚   â””â”€â”€ backtest.js
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ logo.png

â”œâ”€â”€ data/                      # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ database/             # æ•°æ®åº“æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ finance_system.db
â”‚   â”œâ”€â”€ cache/                # ç¼“å­˜æ•°æ®
â”‚   â”œâ”€â”€ backups/              # æ•°æ®å¤‡ä»½
â”‚   â”œâ”€â”€ temp/                 # ä¸´æ—¶æ•°æ®
â”‚   â””â”€â”€ exports/              # å¯¼å‡ºæ•°æ®

â”œâ”€â”€ tests/                     # æµ‹è¯•æ–‡ä»¶ï¼ˆå·²æ•´ç†ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_api.py          # APIæµ‹è¯•
â”‚   â”œâ”€â”€ test_database.py     # æ•°æ®åº“æµ‹è¯•
â”‚   â”œâ”€â”€ test_analysis.py     # åˆ†ææµ‹è¯•
â”‚   â”œâ”€â”€ unit/                # å•å…ƒæµ‹è¯•ï¼ˆå·²ä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ integration/         # é›†æˆæµ‹è¯•ï¼ˆå·²ä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ performance/         # æ€§èƒ½æµ‹è¯•ï¼ˆå·²ä¿ç•™ï¼‰
â”‚   â””â”€â”€ temp_files/          # ä¸´æ—¶æµ‹è¯•æ–‡ä»¶ï¼ˆå·²æ•´ç†ï¼‰
â”‚       â”œâ”€â”€ check_*.py
â”‚       â”œâ”€â”€ test_*.py
â”‚       â”œâ”€â”€ verify_*.py
â”‚       â”œâ”€â”€ debug_*.py
â”‚       â””â”€â”€ fix_*.py

â”œâ”€â”€ dev_tools/                 # å¼€å‘å·¥å…·
â”‚   â”œâ”€â”€ database_setup.py     # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ data_importer.py      # æ•°æ®å¯¼å…¥å·¥å…·
â”‚   â”œâ”€â”€ backup_restore.py     # å¤‡ä»½æ¢å¤å·¥å…·
â”‚   â”œâ”€â”€ debug_*.py            # è°ƒè¯•å·¥å…·ï¼ˆå·²ä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ verify_*.py          # éªŒè¯å·¥å…·ï¼ˆå·²ä¿ç•™ï¼‰
â”‚   â””â”€â”€ quick_test.py        # å¿«é€Ÿæµ‹è¯•

â”œâ”€â”€ docs/                      # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ API.md               # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ USER_GUIDE.md        # ç”¨æˆ·æŒ‡å—
â”‚   â””â”€â”€ DEVELOPMENT.md       # å¼€å‘æ–‡æ¡£

â””â”€â”€ logs/                      # æ—¥å¿—æ–‡ä»¶
    â”œâ”€â”€ app.log              # åº”ç”¨æ—¥å¿—
    â”œâ”€â”€ error.log            # é”™è¯¯æ—¥å¿—
    â””â”€â”€ access.log           # è®¿é—®æ—¥å¿—
```

## ğŸš€ æœåŠ¡å¯åŠ¨è¯´æ˜

### ä¸»åº”ç”¨æœåŠ¡
- å¯åŠ¨å‘½ä»¤: `python app.py`
- è®¿é—®åœ°å€: http://localhost:5000
- åŠŸèƒ½: å®Œæ•´çš„è‚¡ç¥¨ç®¡ç†å’Œå›æµ‹ç³»ç»Ÿ
- æ¼”ç¤ºè´¦å·: admin/admin123, demo/demo123

### å…¬å¼€è‚¡ç¥¨æŸ¥çœ‹æœåŠ¡
- å¯åŠ¨å‘½ä»¤: `python public_stock_view.py`
- è®¿é—®åœ°å€: http://localhost:5001
- åŠŸèƒ½: æ— éœ€ç™»å½•çš„è‚¡ç¥¨æŸ¥çœ‹é¡µé¢

## ğŸ¯ ä¸»è¦åŠŸèƒ½æ¨¡å—

1. **è‚¡ç¥¨ç®¡ç†**: æ·»åŠ ã€åˆ é™¤ã€æŸ¥çœ‹è‚¡ç¥¨ä¿¡æ¯
2. **æŠ€æœ¯åˆ†æ**: æä¾›å¤šç§æŠ€æœ¯æŒ‡æ ‡åˆ†æ
3. **å›æµ‹ç³»ç»Ÿ**: ç­–ç•¥å›æµ‹å’Œæ€§èƒ½è¯„ä¼°
4. **ç”¨æˆ·ç®¡ç†**: æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
5. **æ•°æ®ç®¡ç†**: è‚¡ç¥¨æ•°æ®è·å–å’Œå­˜å‚¨
6. **å…¬å¼€æŸ¥çœ‹**: æ— éœ€ç™»å½•çš„è‚¡ç¥¨ä¿¡æ¯æµè§ˆ

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

ä¸»è¦è¡¨æ ¼:
- users: ç”¨æˆ·ä¿¡æ¯
- stock_info: è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ˆåŒ…å«closeå­—æ®µï¼‰
- stock_prices: è‚¡ç¥¨ä»·æ ¼å†å²
- backtest_results: å›æµ‹ç»“æœ
- user_stocks: ç”¨æˆ·å…³æ³¨çš„è‚¡ç¥¨

## âœ… æœ€è¿‘æ›´æ–°

- âœ… æ·»åŠ æ”¶ç›˜ä»·(close)å­—æ®µåˆ°è‚¡ç¥¨ä¿¡æ¯è¡¨
- âœ… æ›´æ–°å…¬å¼€APIä»¥åŒ…å«æ”¶ç›˜ä»·ä¿¡æ¯
- âœ… æ›´æ–°ä¸»åº”ç”¨æ¨¡æ¿æ˜¾ç¤ºæ”¶ç›˜ä»·
- âœ… æ•´ç†é¡¹ç›®æ–‡ä»¶ç»“æ„
- âœ… ä¼˜åŒ–ä»£ç ç»„ç»‡

## ğŸ“Š æ•°æ®ç›®å½•ç»“æ„

```
data/
â”œâ”€â”€ temp/                # ä¸´æ—¶æ•°æ®
â”‚   â””â”€â”€ temp_akshare_data.csv
â”œâ”€â”€ cache/               # ç¼“å­˜æ•°æ®
â””â”€â”€ exports/             # å¯¼å‡ºæ•°æ®
```

## ğŸ¯ ç›®å½•æ•´ç†åŸåˆ™

1. **åŠŸèƒ½åˆ†ç¦»**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ä»£ç 
2. **æµ‹è¯•åˆ†ç±»**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•åˆ†ç¦»
3. **å·¥å…·ç‹¬ç«‹**: å¼€å‘è°ƒè¯•å·¥å…·å•ç‹¬å­˜æ”¾
4. **æ•°æ®ç®¡ç†**: ä¸´æ—¶æ•°æ®ã€ç¼“å­˜ã€å¯¼å‡ºæ•°æ®åˆ†ç±»å­˜å‚¨
5. **æ–‡æ¡£æ¸…æ™°**: æ¯ä¸ªç›®å½•éƒ½æœ‰æ˜ç¡®çš„ç”¨é€”è¯´æ˜

## ğŸš€ ä½¿ç”¨æŒ‡å—

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/

# è¿è¡Œå•å…ƒæµ‹è¯•
python -m pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
python -m pytest tests/integration/

# è¿è¡Œæ€§èƒ½æµ‹è¯•
python -m pytest tests/performance/
```

### å¼€å‘è°ƒè¯•
```bash
# å¿«é€Ÿæµ‹è¯•Kçº¿æ ‡æ³¨åŠŸèƒ½
python dev_tools/quick_test.py

# éªŒè¯æ ‡æ³¨åŠŸèƒ½
python dev_tools/verify_annotations.py

# è°ƒè¯•AKShareæ•°æ®
python dev_tools/debug_akshare.py
```

### å¯åŠ¨åº”ç”¨
```bash
# å¯åŠ¨Webåº”ç”¨
python app.py

# å¯åŠ¨å®‰å…¨ç‰ˆåº”ç”¨
python app_safe.py

# è¿è¡Œæ¼”ç¤º
python demo.py
```